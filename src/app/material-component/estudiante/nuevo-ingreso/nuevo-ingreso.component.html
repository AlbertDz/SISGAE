<mat-card>
    <mat-card-content>
	    <mat-card-title>Nuevo Ingreso</mat-card-title>
	    <mat-card-subtitle>Inscribir un nuevo estudiante</mat-card-subtitle>
    </mat-card-content>
</mat-card>

<mat-card>
    <mat-card-content>
    	<form [formGroup]="myForm">
    		<mat-progress-bar mode="indeterminate" *ngIf="registrando"></mat-progress-bar>
		    <mat-accordion class="example-headers-align">
			  <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
			    <mat-expansion-panel-header>
			      <mat-panel-title>Datos Personales</mat-panel-title>
			      <mat-panel-description style="display: flex; justify-content: flex-end;"><mat-icon>account_circle</mat-icon></mat-panel-description>
			    </mat-expansion-panel-header>

			    <mat-form-field appearance="outline">
			      <mat-label>Primer Nombre</mat-label>
			      <input matInput placeholder="Primer Nombre" formControlName="primerNombre" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Segundo Nombre</mat-label>
			      <input matInput placeholder="Segundo Nombre" formControlName="segundoNombre">
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Primer Apellido</mat-label>
			      <input matInput placeholder="Primer Apellido" formControlName="primerApellido" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Segundo Apellido</mat-label>
			      <input matInput placeholder="Segundo Apellido" formControlName="segundoApellido">
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Cédula</mat-label>
			      <input matInput type="number" placeholder="Cédula" formControlName="cedula" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
					<mat-label>Fecha de Nacimiento</mat-label>
			        <input type="date" matInput formControlName="fechaNacimiento" placeholder="Fecha de Nacimiento" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
        			<mat-label>Nacionalidad</mat-label>
                    <mat-select placeholder="Nacionalidad" formControlName="nacionalidad" required>
                        <mat-option *ngFor="let valor of nacionalidad" [value]="valor.id_nacionalidad">{{valor.nombre_nacionalidad}}</mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field appearance="outline">
			      <mat-label>Lugar de Nacimiento</mat-label>
			      <input matInput placeholder="Lugar de Nacimiento" formControlName="lugarNacimiento" required>
			    </mat-form-field>

			  </mat-expansion-panel>

			  <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
			    <mat-expansion-panel-header>
			      <mat-panel-title>Teléfonos/Correos</mat-panel-title>
			      <mat-panel-description style="display: flex; justify-content: flex-end;"><mat-icon>perm_phone_msg</mat-icon></mat-panel-description>
			    </mat-expansion-panel-header>

			    <mat-form-field appearance="outline">
			      <mat-label>Teléfono Principal</mat-label>
			      <input matInput type="number" placeholder="Teléfono Principal" formControlName="telefono1" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Teléfono Secundario</mat-label>
			      <input matInput type="number" placeholder="Teléfono Secundario" formControlName="telefono2">
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Teléfono Local</mat-label>
			      <input matInput type="number" placeholder="Teléfono Local" formControlName="telefonoLocal">
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Correo Principal</mat-label>
			      <input matInput type="email" placeholder="Correo Principal" formControlName="correo1" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Correo Secundario</mat-label>
			      <input matInput type="email" placeholder="Correo Secundario" formControlName="correo2">
			    </mat-form-field>
			  </mat-expansion-panel>

			  <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
			    <mat-expansion-panel-header>
			      <mat-panel-title>Dirección</mat-panel-title>
			      <mat-panel-description style="display: flex; justify-content: flex-end;"><mat-icon>room</mat-icon></mat-panel-description>
			    </mat-expansion-panel-header>

			    <mat-form-field appearance="outline">
			      <mat-label>Estado</mat-label>
			      <input matInput placeholder="Estado" formControlName="estado" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Municipio</mat-label>
			      <input matInput placeholder="Municipio" formControlName="municipio" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Parroquia</mat-label>
			      <input matInput placeholder="Parroquia" formControlName="parroquia" required>
			    </mat-form-field>

				<mat-form-field appearance="outline">
			      <mat-label>Sector</mat-label>
			      <input matInput placeholder="Sector" formControlName="sector" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Calle</mat-label>
			      <input matInput placeholder="Calle" formControlName="calle" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline">
			      <mat-label>Casa/Apartamento</mat-label>
			      <input matInput placeholder="Casa/Apartamento" formControlName="casa" required>
			    </mat-form-field>
			  </mat-expansion-panel>

			  <mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)" hideToggle>
			    <mat-expansion-panel-header>
			      <mat-panel-title>Documentos</mat-panel-title>
			      <mat-panel-description style="display: flex; justify-content: flex-end;"><mat-icon>assignment</mat-icon></mat-panel-description>
			    </mat-expansion-panel-header>

			    <mat-selection-list #recaudosListos (selectionChange)="onSelection($event)">
				  <mat-list-option *ngFor="let recaudo of RECAUDOS; let i = index" [value]="i">
				    {{recaudo.nombre_documento}}
				  </mat-list-option>
				</mat-selection-list>
			  </mat-expansion-panel>

			  <mat-expansion-panel [expanded]="step === 4" (opened)="setStep(4)" hideToggle>
			    <mat-expansion-panel-header>
			      <mat-panel-title>Carrera</mat-panel-title>
			      <mat-panel-description style="display: flex; justify-content: flex-end;"><mat-icon>import_contacts</mat-icon></mat-panel-description>
			    </mat-expansion-panel-header>

			    <mat-form-field appearance="outline">
			      <mat-label>Cohorte</mat-label>
			      <input matInput placeholder="Cohorte" [value]="periodos[0].id_periodo" formControlName="cohorte" required>
			    </mat-form-field>

			    <mat-form-field appearance="outline" style="padding: 0 10px; min-width: 100px;">
        			<mat-label>Postgrado</mat-label>
                    <mat-select placeholder="Postgrado" formControlName="postgrado" (selectionChange)="valorPostgrado(myForm.get('postgrado').value)">
                        <mat-option *ngFor="let postgrado of postgrados" [value]="postgrado.id_postgrado">{{postgrado.nombre_postgrado}}</mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field appearance="outline" style="padding: 0 10px; min-width: 100px;">
        			<mat-label>Carrera</mat-label>
                    <mat-select placeholder="Carrera" formControlName="carrera">
                        <mat-option *ngFor="let carrera of carreras" [value]="carrera.id_carrera">{{carrera.nombre_carrera}}</mat-option>
                    </mat-select>
                </mat-form-field>
			  </mat-expansion-panel>

			</mat-accordion>

			<div style="text-align: right;">
				<button mat-raised-button color="accent" [disabled]="myForm.invalid" (click)="registrarNuevoIngreso()" style="margin-top: 20px;">Registrar Estudiante</button>
			</div>
		</form>
    </mat-card-content>
</mat-card>
